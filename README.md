# Project GOC

![ëœë”©í˜ì´ì§€](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbI9QAP%2Fbtq0Q9RoyVJ%2F1fL8gYzpfIianHr8NsPkI0%2Fimg.png)

[í”„ë¡œì íŠ¸ êµ¬ê²½ê°€ê¸°](https://project-goc.netlify.app/)

## **âœ¨ ëª©í‘œ**

<br/>

- APIë¥¼ í™œìš©í•œ êµ­ë‚´ì™¸ ì½”ë¡œë‚˜ í†µê³„ ìë£Œ ì œê³µ
  - êµ­ë‚´
    - êµ­ë‚´ ì¢…í•© í˜„í™©
    - ì‹œë„ë³„ í˜„í™©
    - ê±°ë¦¬ë‘ê¸° ì •ë³´ (ë§í¬)
    - ë°±ì‹  ì ‘ì¢… ì„¼í„° ì •ë³´
    - êµ­ë‚´ ì£¼ìš” ì†Œì‹ ('ì½”ë¡œë‚˜ ë°±ì‹ ' ë„¤ì´ë²„ ë‰´ìŠ¤, ë‹¤ìŒ ì›¹ë¬¸ì„œ ê²°ê³¼)
  - í•´ì™¸
    - í•´ì™¸ ì¢…í•©í˜„í™©
    - ì£¼ë³€ êµ­ê°€ë³„ í˜„í™©
    - ì „ ì„¸ê³„ ëŒ€ì‹œë³´ë“œ
- ë°˜ì‘í˜• ì›¹ êµ¬ì¶• (Mobile First)

<br/>

## **ğŸ§° ì‚¬ìš©ê¸°ìˆ **

<br/>

- HTML, CSS(PostCSS), Reactjs, Nodejs(Expressjs)
- ê³µê³µë°ì´í„°í¬í„¸ OPEN API (êµ­ë‚´ ì¢…í•©í˜„í™©, ì‹œë„ë³„í˜„í™©, ë°±ì‹  ì ‘ì¢… ì„¼í„°)
- ì¹´ì¹´ì˜¤ë§µ API (ë°±ì‹  ì ‘ì¢… ì„¼í„° ìœ„ì¹˜ì œê³µ)
- ë„¤ì´ë²„ ë‰´ìŠ¤ API (ì£¼ìš”ì†Œì‹ - ë„¤ì´ë²„ ê²€ìƒ‰ê²°ê³¼)
- ë‹¤ìŒ ê²€ìƒ‰ API (ì£¼ìš”ì†Œì‹ - ë‹¤ìŒ ê²€ìƒ‰ê²°ê³¼)
- axios, xmltojson
- momentjs(ë‚ ì§œë¼ì´ë¸ŒëŸ¬ë¦¬), Chartjs , sweetalert2

<br/>

## **ğŸ“… ì†Œìš”ê¸°ê°„**

<br/>

- 7ì¼

<br/>

## **ğŸ‘€ ì£¼ìš”ê¸°ëŠ¥ & ì½”ë“œ**

<br/>

```
ğŸ’¡ ì£¼ìš”ê¸°ëŠ¥

- êµ­ë‚´ ì½”ë¡œë‚˜ ë°ì´í„° ì •ë³´ ì œê³µ
- í•´ì™¸ ì½”ë¡œë‚˜ ë°ì´í„° ì •ë³´ ì œê³µ
- ë°±ì‹  ì ‘ì¢… ì„¼í„° ì •ë³´ ì œê³µ
- 'ì½”ë¡œë‚˜ ë°±ì‹ ' ê²€ìƒ‰ ê²°ê³¼ ì œê³µ
- ë¡œë”© ìŠ¤í”¼ë„ˆ ë° ì—ëŸ¬í˜ì´ì§€ êµ¬ì¶•
```

<br/>

&nbsp;íŒŒì¼ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcQCvqN%2Fbtq0Tv7k98Z%2FiIOO3YDQDcoV7y4M9keO20%2Fimg.png"/></p>

<br/>

## **1. êµ­ë‚´ ì½”ë¡œë‚˜ ë°ì´í„° ì •ë³´ ì œê³µ**

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (êµ­ë‚´ ì¢…í•© í˜„í™©)**

<br/>

> ê³µê³µë°ì´í„°í¬í„¸ OPEN APIë¥¼ í†µí•˜ì—¬ êµ­ë‚´ ì¢…í•© í˜„í™©ë°ì´í„°ë¥¼ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbI9QAP%2Fbtq0Q9RoyVJ%2F1fL8gYzpfIianHr8NsPkI0%2Fimg.png"/></p>

<br/>

### ğŸ“‚ server>Router>KoreaAllRoute.js

---

<br/>

&nbsp;í•´ë‹¹ APIëŠ” xmlë°ì´í„° íƒ€ì…ì„ ì œê³µí•˜ê¸°ì— JSONíƒ€ì…ì˜ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ route íŒŒì¼ì—ì„œ xmltojson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ jsonë°ì´í„°ë¡œ íŒŒì‹± í›„ ë°ì´í„°ë¥¼ clientë¡œ response í•´ì£¼ê³ ìˆìŠµë‹ˆë‹¤.

<br/>

```js
// ë‚ ì§œ êµ¬í•˜ê¸° ìœ„í•¨ (7~8ì¼ê°„ì˜ ë°ì´í„°)
const date = new Date();
const year = date.getFullYear();
const month =
  date.getMonth() + 1 > 10 ? date.getMonth() + 1 : "0" + (date.getMonth() + 1);
const day = date.getDate() >= 10 ? date.getDate() : "0" + date.getDate();
const today = year + "" + month + "" + day;

const options = {
  method: "GET",
  url: `http://openapi.data.go.kr/openapi/service/rest/Covid19/getCovid19SidoInfStateJson?serviceKey=${
    config.OPENAPI_KEY
  }&pageNo=1&numOfRows=10&startCreateDt=${today - 7}&endCreateDt=${today}`,
  headers: {},
};
router.get("/", (req, res) => {
  request(options, (error, response, body) => {
    if (error) throw new Error(error);
    const xmlToJson = converter.xml2json(body);
    res.send(xmlToJson);
  });
});
```

<br/>

### ğŸ“‚ client>src>components>KoreaData>KoreaAllData>KoreaAllData.jsx

---

<br/>

&nbsp;íŒŒì‹± ë°ì´í„°ë¥¼ ë°›ì€ clientì—ì„œëŠ” ì¼ì¼ ì§€ì—­ë°œìƒ ë° í•´ì™¸ìœ ì…ê³¼ ì¢…í•© í™•ì§„ì, ì¹˜ë£Œì¤‘, ì™„ì¹˜ì, ì‚¬ë§ìì˜ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ stateì— ë°ì´í„°ë¥¼ setí•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.

<br/>

```js
// ì¼ì¼ í˜„í™© ë°ì´í„°ì œê³µì„ ìœ„í•œ í•´ë‹¹ ë°ì´í„° ê°€ê³µ
const cardsDataHandler = (totalData, yesterDayData) => {
  const totalDefCnt = totalData[2].elements[0].text;
  const totalIngCnt = totalData[8].elements[0].text;
  const totalClearCnt = totalData[7].elements[0].text;
  const totalDeathCnt = totalData[1].elements[0].text;
  const yesterDayDefCnt = yesterDayData[2].elements[0].text;
  const yesterDayIngCnt = yesterDayData[8].elements[0].text;
  const yesterDayClearCnt = yesterDayData[7].elements[0].text;
  const yesterDayDeathCnt = yesterDayData[1].elements[0].text;

  //í™•ì§„ì
  const newDefCnt = totalDefCnt - yesterDayDefCnt;
  //ê²€ì‚¬ì§„í–‰
  const newIngCnt = totalIngCnt - yesterDayIngCnt;
  //ê²©ë¦¬í•´ì œ
  const newClearCnt = totalClearCnt - yesterDayClearCnt;
  //ì‚¬ë§ì
  const newDeathCnt = totalDeathCnt - yesterDayDeathCnt;

  // ì²œë‹¨ìœ„ ì½¤ë§ˆë¥¼ ìœ„í•´ toLocaleString() ì‚¬ìš©
  setCardsData([
    {
      id: 0,
      title: "í™•ì§„ì ìˆ˜",
      count: Number(totalDefCnt).toLocaleString(),
      new: Number(newDefCnt).toLocaleString(),
    },
    {
      id: 1,
      title: "ì¹˜ë£Œ ì¤‘",
      count: Number(totalIngCnt).toLocaleString(),
      new: Number(newIngCnt).toLocaleString(),
    },
    {
      id: 2,
      title: "ì™„ì¹˜ì ìˆ˜",
      count: Number(totalClearCnt).toLocaleString(),
      new: Number(newClearCnt).toLocaleString(),
    },
    {
      id: 3,
      title: "ì‚¬ë§ì ìˆ˜",
      count: Number(totalDeathCnt).toLocaleString(),
      new: Number(newDeathCnt).toLocaleString(),
    },
  ]);
};

// ì°¨íŠ¸ë°ì´í„° ì œê³µì„ ìœ„í•œ reduceë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„° ê°€ê³µ
const chartDataHandler = (items) => {
  const arr = items.reduce((prev, curr) => {
    const currDate = curr.elements[13].elements[0].text;
    const split = currDate.split(" ").slice(1, 3);
    const month = split[0].split("ì›”").slice(0, 1);
    const day = split[1].split("ì¼").slice(0, 1);
    const date = `${month}.${day}`;
    const confirmed = curr.elements[6].elements[0].text;
    const localData = curr.elements[9].elements[0].text;
    const overFlowData = curr.elements[10].elements[0].text;
    const category = curr.elements[3].elements[0].text;
    prev.push({ confirmed, localData, overFlowData, date, category });
    return prev;
  }, []);

  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬ í™•ì§„ì ë°ì´í„° ì·¨í•©
  const otherObjs = arr.slice(0, 9).map((item) => {
    return item;
  });
  const testConfirmed = otherObjs.map((obj) => {
    return obj.confirmed;
  });
  const otherConfirmed = testConfirmed.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );

  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬ ì´ì™¸ì˜ ë°ì´í„° ì·¨í•©
  const doughnutObjs = arr.slice(9, 18).map((item) => {
    return item;
  });
  const category = doughnutObjs.map((obj) => {
    return obj.category;
  });
  const confirmed = doughnutObjs.map((obj) => {
    return obj.confirmed;
  });

  // ëª¨ë“  ì¹´í…Œê³ ë¦¬ì˜ ë°ì´í„° ì·¨í•©
  const totalCategory = [...category, "ê¸°íƒ€"];
  const totalConfirmed = [...confirmed, otherConfirmed];
  const total = totalConfirmed.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );

  //ë§‰ëŒ€ ì°¨íŠ¸ ë°ì´í„° (í•©ê³„ë°ì´í„°ë§Œ ì·¨í•©)
  const barObjs = arr
    .filter((item) => item.category === "í•©ê³„")
    .map((item) => {
      return item;
    });
  const reBarObjs = barObjs.reverse();
  const date = reBarObjs.map((obj) => {
    return obj.date;
  });
  const localData = reBarObjs.map((obj) => {
    return Number(obj.localData).toLocaleString();
  });
  const overFlowData = reBarObjs.map((obj) => {
    return Number(obj.overFlowData).toLocaleString();
  });

  setDoughnutData({
    // setDoughnutData
  });
  setBarData({
    // setBarData
  });
};

//7ì¼ê°„ì˜ ë°ì´í„°ë§Œ Handlerì¸ìê°’ìœ¼ë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.
axios
  .get("https://projectgoc.herokuapp.com/api")
  .then((res) => {
    const data = res.data.elements[0].elements[1].elements[0].elements;
    const items = data.slice(0, 133);
    const totalData = items[18].elements;
    const yesterDayData = items[37].elements;
    panelDataHandler(totalData);
    cardsDataHandler(totalData, yesterDayData);
    chartDataHandler(items);
    setIsLoading(false);
  })
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (ì‹œë„ë³„ í˜„í™©)**

<br/>

> ê³µê³µë°ì´í„°í¬í„¸ OPEN APIë¥¼ í†µí•˜ì—¬ êµ­ë‚´ ì‹œë„ë³„ í˜„í™©ë°ì´í„°ë¥¼ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdECAxX%2Fbtq0UdS7ErL%2F8Ykd8Y9XDLgVoLV81nMTq1%2Fimg.png"/></p>

<br/>

### ğŸ“‚ server>Router>KoreaCityRoute.js

---

<br/>

&nbsp;í•´ë‹¹ APIë„ xmltojson ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

<br/>

```js
// ë‚ ì§œ êµ¬í•˜ê¸° ìœ„í•¨(ë‹¹ì¼ ê¸°ì¤€ 2ì¼ì „ ê¹Œì§€ì˜ ë°ì´í„° ë¡œë“œ)
const date = new Date();
const year = date.getFullYear();
const month =
  date.getMonth() + 1 > 10 ? date.getMonth() + 1 : "0" + (date.getMonth() + 1);
const day = date.getDate() >= 10 ? date.getDate() : "0" + date.getDate();
const today = year + "" + month + "" + day;

const options = {
  method: "GET",
  url: `http://openapi.data.go.kr/openapi/service/rest/Covid19/getCovid19SidoInfStateJson?serviceKey=${
    config.OPENAPI_KEY
  }&pageNo=1&numOfRows=10&startCreateDt=${today - 2}&endCreateDt=${today}`,
  headers: {},
};
router.get("/", (req, res) => {
  request(options, (error, response, body) => {
    if (error) throw new Error(error);
    const xmlToJson = converter.xml2json(body);
    res.send(xmlToJson);
  });
});
```

<br/>

### ğŸ“‚ client>src>components>KoreaData>KoreaCityData>KoreaCityData.jsx

---

<br/>

&nbsp;íŒŒì‹± ë°ì´í„°ë¥¼ ë°›ì€ clientì—ì„œëŠ” ì‹œë„ë³„ í™•ì§„ì, ì¹˜ë£Œì¤‘, ì™„ì¹˜ì, ì‚¬ë§ì ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

<br/>

```js
// ì‹œë„ë³„ ì¢…í•© ë°ì´í„° ê°€ê³µ
const dataHandler = (items) => {
  const arr = items.reduce((prev, curr) => {
    const deathCnt = curr.elements[1].elements[0].text;
    const confirmeCnt = curr.elements[2].elements[0].text;
    const clearCnt = curr.elements[7].elements[0].text;
    const ingCnt = curr.elements[8].elements[0].text;
    const category = curr.elements[3].elements[0].text;
    prev.push({ deathCnt, confirmeCnt, clearCnt, ingCnt, category });
    return prev;
  }, []);

  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬ ë°°ì—´
  const otherObjs = arr.slice(0, 9).map((item) => {
    return item;
  });
  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬  í™•ì§„ì
  const confirmeCnt = otherObjs.map((obj) => {
    return obj.confirmeCnt;
  });
  const otherConfirmeCnt = confirmeCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬  ì¹˜ë£Œì¤‘
  const ingCnt = otherObjs.map((obj) => {
    return obj.ingCnt;
  });
  const otherIngCnt = ingCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  // ê¸°íƒ€ ì¹´í…Œê³ ë¦¬  ì™„ì¹˜ì
  const clearCnt = otherObjs.map((obj) => {
    return obj.clearCnt;
  });
  const otherClearCnt = clearCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  //ê¸°íƒ€ ì¹´í…Œê³ ë¦¬  ì‚¬ë§ì
  const deathCnt = otherObjs.map((obj) => {
    return obj.deathCnt;
  });
  const otherDeathCnt = deathCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );

  //ì£¼ìš” ë°ì´í„° ë°°ì—´
  const mainObjs = arr.slice(9, 18).map((item) => {
    return item;
  });
  //ì£¼ìš” ë°ì´í„° í™•ì§„ì
  const mainConfirmeCnt = mainObjs.map((obj) => {
    return Number(obj.confirmeCnt);
  });
  //ì£¼ìš” ë°ì´í„° ì¹˜ë£Œì¤‘
  const mainIngCnt = mainObjs.map((obj) => {
    return Number(obj.ingCnt);
  });
  //ì£¼ìš” ë°ì´í„° ì™„ì¹˜ì
  const mainClearCnt = mainObjs.map((obj) => {
    return Number(obj.clearCnt);
  });
  //ì£¼ìš” ë°ì´í„° ì‚¬ë§ì
  const mainDeathCnt = mainObjs.map((obj) => {
    return Number(obj.deathCnt);
  });
  //ì£¼ìš” ë°ì´í„° ì¹´í…Œê³ ë¦¬
  const category = mainObjs.map((obj) => {
    return obj.category;
  });

  //í†µí•© ë°ì´í„°
  const totalCategory = [...category, "ê¸°íƒ€"];
  const totalConfirmeCnt = [...mainConfirmeCnt, otherConfirmeCnt];
  const totalIngCnt = [...mainIngCnt, otherIngCnt];
  const totalClearCnt = [...mainClearCnt, otherClearCnt];
  const totalDeathCnt = [...mainDeathCnt, otherDeathCnt];

  const sumFirmeCnt = totalConfirmeCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  const sumIngCnt = totalIngCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  const sumClearCnt = totalClearCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  const sumDeathCnt = totalDeathCnt.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );

  setData([
    // setData
  ]);
};

//ê°€ì¥ ìµœê·¼ì˜ ë°ì´í„°ë§Œ Handlerì¸ìê°’ìœ¼ë¡œ ë„£ì–´ì¤ë‹ˆë‹¤.
axios
  .get("https://projectgoc.herokuapp.com/api/city")
  .then((res) => {
    const data = res.data.elements[0].elements[1].elements[0].elements;
    const items = data.slice(0, 19);
    dataHandler(items);
    setIsLoading(false);
  })
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```

<br/>

## **2. í•´ì™¸ ì½”ë¡œë‚˜ ë°ì´í„° ì •ë³´ ì œê³µ**

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (ì£¼ë³€ êµ­ê°€ë³„ í˜„í™©)**

<br/>

> NovelCOVID APIë¥¼ í†µí•˜ì—¬ ì£¼ë³€ êµ­ê°€ë³„ í˜„í™© ë°ì´í„°ë¥¼ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤.

<br/>

### ğŸ“‚ client>src>components>OverseasData>OverseasCountryData>OverseasCountryData.jsx

---

<br/>

&nbsp;ë°›ì€ ë°ì´í„°ë¥¼ clientì—ì„œëŠ” ì£¼ë³€ êµ­ê°€ë³„ ë°ì´í„°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

<br/>

```js
// ì£¼ë³€ êµ­ê°€ë³„ ë°ì´í„° ê°€ê³µ
const dataHandler = (items) => {
  const arr = items.reduce((prev, curr) => {
    const country = curr.country;
    const cases = curr.timeline.cases[Object.keys(curr.timeline.cases)];
    const deaths = curr.timeline.deaths[Object.keys(curr.timeline.deaths)];
    const recovered =
      curr.timeline.recovered[Object.keys(curr.timeline.recovered)];
    prev.push({
      country: country || 0,
      cases: cases || 0,
      deaths: deaths || 0,
      recovered: recovered || 0,
    });
    return prev;
  }, []);
  const reArr = arr.reverse();
  const country = reArr.map((item) => {
    return item.country;
  });
  const cases = reArr.map((item) => {
    return item.cases;
  });
  const deaths = reArr.map((item) => {
    return item.deaths;
  });
  const recovered = reArr.map((item) => {
    return item.recovered;
  });
  const sumFirmeCnt = cases.reduce((prev, curr) => Number(prev) + Number(curr));
  const sumDeathsCnt = deaths.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  const sumClearCnt = recovered.reduce(
    (prev, curr) => Number(prev) + Number(curr)
  );
  setData([
    // setData
  ]);
};
axios
  .get("https://projectgoc.herokuapp.com/api/country")
  .then((res) => {
    const items = res.data;
    dataHandler(items);
    setIsLoading(false);
  })
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```

<br/>

## **3. êµ­ë‚´ ì½”ë¡œë‚˜ ê´€ë ¨ ì •ë³´ì œê³µ**

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (ë°±ì‹  ì ‘ì¢… ì„¼í„° ì •ë³´)**

<br/>

> ì¹´ì¹´ì˜¤ë§µ APIì™€ ê³µê³µë°ì´í„°í¬í„¸ì„ í†µí•˜ì—¬ ë°±ì‹  ì ‘ì¢… ì„¼í„° ì •ë³´ë¥¼ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcAJAsf%2Fbtq0XoNpRQR%2FK3tpSxKfBJ30SOnTsKlPnK%2Fimg.png"/></p>

<br/>

### ğŸ“‚ client>src>components>Center>Center.jsx

---

<br/>

&nbsp;ë°›ì€ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¼í„°ì˜ ìœ„ì¹˜ë¥¼ ì¹´ì¹´ì˜¤mapìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.

<br/>

```js
// ì¹´ì¹´ì˜¤ë§µ API í˜¸ì¶œ
const kakaoMaps = (centers) => {
  const mapContainer = document.getElementById("map"); // ì§€ë„ë¥¼ í‘œì‹œí•  div
  const mapOption = {
    center: new kakao.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
    level: 10, // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
  };
  const map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤

  // setëœ ì„¼í„° ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ mapìœ¼ë¡œ ì „ë‹¬
  centers.forEach((center) => {
    //ë§ˆì»¤ ì´ë¯¸ì§€ url
    const imageSrc =
      "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

    // ë§ˆì»¤ ì´ë¯¸ì§€ì˜ ì´ë¯¸ì§€ í¬ê¸° ì…ë‹ˆë‹¤
    const imageSize = new kakao.maps.Size(24, 35);

    // ë§ˆì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

    // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const marker = new kakao.maps.Marker({
      map: map, // ë§ˆì»¤ë¥¼ í‘œì‹œí•  ì§€ë„
      position: center.latlng, // ë§ˆì»¤ë¥¼ í‘œì‹œí•  ìœ„ì¹˜
      clickable: true,
      image: markerImage, // ë§ˆì»¤ ì´ë¯¸ì§€
    });

    // ë§ˆì»¤ë¥¼ ì§€ë„ì— í‘œì‹œí•©ë‹ˆë‹¤.
    marker.setMap(map);

    const iwRemoveable = true;

    // ì¸í¬ìœˆë„ìš°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const infowindow = new kakao.maps.InfoWindow({
      content: center.info,
      removable: iwRemoveable,
    });

    // ë§ˆì»¤ì— í´ë¦­ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
    kakao.maps.event.addListener(marker, "click", () => {
      // ë§ˆì»¤ ìœ„ì— ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
      infowindow.open(map, marker);
    });
  });

  // --------------------------- ì‚¬ìš©ì ìœ„ì¹˜ ì¸ì‹
  // HTML5ì˜ geolocationìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
  if (navigator.geolocation) {
    // GeoLocationì„ ì´ìš©í•´ì„œ ì ‘ì† ìœ„ì¹˜ë¥¼ ì–»ì–´ì˜µë‹ˆë‹¤
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude; // ìœ„ë„
      let lon = position.coords.longitude; // ê²½ë„

      let locPosition = new kakao.maps.LatLng(lat, lon); // ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ë¥¼ geolocationìœ¼ë¡œ ì–»ì–´ì˜¨ ì¢Œí‘œë¡œ ìƒì„±í•©ë‹ˆë‹¤
      const message = '<div style="padding:5px;">ì—¬ê¸°ì— ê³„ì‹ ê°€ìš”?!</div>'; // ì¸í¬ìœˆë„ìš°ì— í‘œì‹œë  ë‚´ìš©ì…ë‹ˆë‹¤

      // ë§ˆì»¤ì™€ ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
      displayMarker(locPosition, message);
    });
  } else {
    // HTML5ì˜ GeoLocationì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ë•Œ ë§ˆì»¤ í‘œì‹œ ìœ„ì¹˜ì™€ ì¸í¬ìœˆë„ìš° ë‚´ìš©ì„ ì„¤ì •í•©ë‹ˆë‹¤

    const locPosition = new kakao.maps.LatLng(33.450701, 126.570667);
    const message = "geolocationì„ ì‚¬ìš©í• ìˆ˜ ì—†ì–´ìš”..";

    displayMarker(locPosition, message);
  }

  // ì§€ë„ì— ë§ˆì»¤ì™€ ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
  function displayMarker(locPosition, message) {
    // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const marker = new kakao.maps.Marker({
      map: map,
      position: locPosition,
    });

    const iwContent = message; // ì¸í¬ìœˆë„ìš°ì— í‘œì‹œí•  ë‚´ìš©
    const iwRemoveable = true;

    // ì¸í¬ìœˆë„ìš°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const infowindow = new kakao.maps.InfoWindow({
      content: iwContent,
      removable: iwRemoveable,
    });

    // ì¸í¬ìœˆë„ìš°ë¥¼ ë§ˆì»¤ìœ„ì— í‘œì‹œí•©ë‹ˆë‹¤
    infowindow.open(map, marker);

    // ì§€ë„ ì¤‘ì‹¬ì¢Œí‘œë¥¼ ì ‘ì†ìœ„ì¹˜ë¡œ ë³€ê²½í•©ë‹ˆë‹¤
    map.setCenter(locPosition);
  }
};

// ë°›ì€ ë°ì´í„° ê°€ê³µ ë°‘ state set
const dataHandler = (items) => {
  const arr = items.map((item) => {
    const name = item.centerName;
    const sp = name.split("ì½”ë¡œë‚˜19")[1];
    const center = {
      id: item.id,
      centerName: sp,
      orgName: item.org,
      centerType: item.centerType,
      facilityName: item.facilityName,
      address: item.address,
      sido: item.sido,
      sigungu: item.sigungu,
      zipCode: item.zipCode,
      url: `https://map.kakao.com/link/map/${item.org || sp},${item.lng},${
        item.lat
      }`,
      latlng: new kakao.maps.LatLng(item.lng, item.lat),
      info: `<div style="width:200px; padding:5px; font-size:12px;">${
        item.org || sp
      } <br><a href="https://map.kakao.com/link/map/${item.org || sp},${
        item.lng
      },${
        item.lat
      }" style="color:blue" target="_blank">í°ì§€ë„ë³´ê¸°</a> <a href="https://map.kakao.com/link/to/${
        item.org || sp
      },${item.lng},${
        item.lat
      }" style="color:blue" target="_blank">ê¸¸ì°¾ê¸°</a></div>`,
    };
    return center;
  });
  setCenters(arr);
  kakaoMaps(arr);
};

//APIì—ì„œ ë°›ì€ ë°ì´í„° Handlerì— ì¸ìê°’ìœ¼ë¡œ
axios
  .get("https://projectgoc.herokuapp.com/api/center")
  .then((res) => {
    const items = res.data.data;
    setIsLoading(false);
    dataHandler(items);
  })
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (ì£¼ìš” ì†Œì‹)**

<br/>

> ë„¤ì´ë²„ ë‰´ìŠ¤ APIì™€ ë‹¤ìŒ ê²€ìƒ‰ APIë¥¼ í™œìš©í•˜ì—¬ 'ì½”ë¡œë‚˜ ë°±ì‹ 'ê´€ë ¨ ë¬¸ì„œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fb6Hlpe%2Fbtq0Xpr2io1%2FqhGuNxMyw8fDqdDp1LHYrK%2Fimg.png"/></p>

<br/>

### ğŸ“‚ client>src>components>News>News.jsx

---

<br/>

&nbsp;ë‘ê°œì˜ Routerì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê¸° ë•Œë¬¸ì— Axiosì˜ Multiple Requestê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

<br/>

```js
// ë°›ì•„ì˜¨ ë¬¸ì„œë°ì´í„° ê°€ê³µ
const dataHandler = (items) => {
  const arr = items.reduce((prev, curr) => {
    // ë¬¸ì„œë“¤ì˜ titleê³¼ descì˜ ë¶ˆí•„ìš”í•œ íŠ¹ìˆ˜ë¬¸ìë¥¼ ì œê±°í•˜ê¸°ìœ„í•œ ì •ê·œì‹
    const reg = /[<b>|</b>|&qout|amp|lt|gt;]/g;
    const regTitle = curr.title
      .replace(reg, "")
      .replace(/#39/g, "'")
      .replace(/#34/g, '"');
    const itemDesc = curr.desc;
    // ë¬¸ì„œ ë‚ ì§œì˜ ë°ì´í„° í¬ë§· ë³€ê²½ì„ ìœ„í•œ momentjsë¼ì´ë¸ŒëŸ¬ë¦¬
    const articleDate = moment(curr.date).format("YYYY.MM.DD");
    const articleDesc = itemDesc
      .replace(reg, "")
      .replace(/#39/g, "'")
      .replace(/#34/g, '"');
    const articleUrl = curr.url;
    const articleSite = curr.site;
    prev.push({
      id: i++,
      title: regTitle,
      desc: articleDesc,
      url: articleUrl,
      date: articleDate,
      site: articleSite,
    });

    return prev;
  }, []);

  setNews({
    // setNews
  });
};

// ë‘ê°œì˜ requestë¥¼ ìœ„í•œ Axios Multiple Requestê¸°ëŠ¥ ì‚¬ìš©
axios
  .all([
    axios.get("https://projectgoc.herokuapp.com/api/news/naver"),
    axios.get("https://projectgoc.herokuapp.com/api/news/daum"),
  ])
  .then(
    axios.spread((res1, res2) => {
      const naverArr = res1.data.items.reduce((prev, curr) => {
        prev.push({
          title: curr.title,
          desc: curr.description,
          url: curr.link,
          date: curr.pubDate,
          site: "naver",
        });
        return prev;
      }, []);

      const daumArr = res2.data.documents.reduce((prev, curr) => {
        prev.push({
          title: curr.title,
          desc: curr.contents,
          url: curr.url,
          date: curr.datetime,
          site: "daum",
        });
        return prev;
      }, []);
      const arr = [...naverArr, ...daumArr];
      dataHandler(arr);
      setIsLoading(false);
    })
  )
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```

<br/>

## **4. ë¡œë”© ìŠ¤í”¼ë„ˆ ë° ì—ëŸ¬í˜ì´ì§€ êµ¬ì¶•**

<br/>

### **ğŸ’» ì½”ë“œì‚´í´ë³´ê¸° (ë¡œë”©ìŠ¤í”¼ë„ˆ)**

<br/>

> state ê´€ë¦¬ë¥¼ í†µí•˜ì—¬ ë°ì´í„° ë¡œë“œì „ ë¡œë”© ìŠ¤í”¼ë„ˆë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

<br/>

<p align="center"><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcAJAsf%2Fbtq0XoNpRQR%2FK3tpSxKfBJ30SOnTsKlPnK%2Fimg.png"/></p>

<br/>

### ğŸ“‚ client>src>components>Center>Center.jsx

---

<br/>

&nbsp;ë°›ì€ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¼í„°ì˜ ìœ„ì¹˜ë¥¼ ì¹´ì¹´ì˜¤mapìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.

<br/>

```js
// ì¹´ì¹´ì˜¤ë§µ API í˜¸ì¶œ
const kakaoMaps = (centers) => {
  const mapContainer = document.getElementById("map"); // ì§€ë„ë¥¼ í‘œì‹œí•  div
  const mapOption = {
    center: new kakao.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
    level: 10, // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
  };
  const map = new kakao.maps.Map(mapContainer, mapOption); // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤

  // setëœ ì„¼í„° ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ mapìœ¼ë¡œ ì „ë‹¬
  centers.forEach((center) => {
    //ë§ˆì»¤ ì´ë¯¸ì§€ url
    const imageSrc =
      "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

    // ë§ˆì»¤ ì´ë¯¸ì§€ì˜ ì´ë¯¸ì§€ í¬ê¸° ì…ë‹ˆë‹¤
    const imageSize = new kakao.maps.Size(24, 35);

    // ë§ˆì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

    // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const marker = new kakao.maps.Marker({
      map: map, // ë§ˆì»¤ë¥¼ í‘œì‹œí•  ì§€ë„
      position: center.latlng, // ë§ˆì»¤ë¥¼ í‘œì‹œí•  ìœ„ì¹˜
      clickable: true,
      image: markerImage, // ë§ˆì»¤ ì´ë¯¸ì§€
    });

    // ë§ˆì»¤ë¥¼ ì§€ë„ì— í‘œì‹œí•©ë‹ˆë‹¤.
    marker.setMap(map);

    const iwRemoveable = true;

    // ì¸í¬ìœˆë„ìš°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const infowindow = new kakao.maps.InfoWindow({
      content: center.info,
      removable: iwRemoveable,
    });

    // ë§ˆì»¤ì— í´ë¦­ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤
    kakao.maps.event.addListener(marker, "click", () => {
      // ë§ˆì»¤ ìœ„ì— ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
      infowindow.open(map, marker);
    });
  });

  // --------------------------- ì‚¬ìš©ì ìœ„ì¹˜ ì¸ì‹
  // HTML5ì˜ geolocationìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤
  if (navigator.geolocation) {
    // GeoLocationì„ ì´ìš©í•´ì„œ ì ‘ì† ìœ„ì¹˜ë¥¼ ì–»ì–´ì˜µë‹ˆë‹¤
    navigator.geolocation.getCurrentPosition((position) => {
      let lat = position.coords.latitude; // ìœ„ë„
      let lon = position.coords.longitude; // ê²½ë„

      let locPosition = new kakao.maps.LatLng(lat, lon); // ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ë¥¼ geolocationìœ¼ë¡œ ì–»ì–´ì˜¨ ì¢Œí‘œë¡œ ìƒì„±í•©ë‹ˆë‹¤
      const message = '<div style="padding:5px;">ì—¬ê¸°ì— ê³„ì‹ ê°€ìš”?!</div>'; // ì¸í¬ìœˆë„ìš°ì— í‘œì‹œë  ë‚´ìš©ì…ë‹ˆë‹¤

      // ë§ˆì»¤ì™€ ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
      displayMarker(locPosition, message);
    });
  } else {
    // HTML5ì˜ GeoLocationì„ ì‚¬ìš©í•  ìˆ˜ ì—†ì„ë•Œ ë§ˆì»¤ í‘œì‹œ ìœ„ì¹˜ì™€ ì¸í¬ìœˆë„ìš° ë‚´ìš©ì„ ì„¤ì •í•©ë‹ˆë‹¤

    const locPosition = new kakao.maps.LatLng(33.450701, 126.570667);
    const message = "geolocationì„ ì‚¬ìš©í• ìˆ˜ ì—†ì–´ìš”..";

    displayMarker(locPosition, message);
  }

  // ì§€ë„ì— ë§ˆì»¤ì™€ ì¸í¬ìœˆë„ìš°ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
  function displayMarker(locPosition, message) {
    // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const marker = new kakao.maps.Marker({
      map: map,
      position: locPosition,
    });

    const iwContent = message; // ì¸í¬ìœˆë„ìš°ì— í‘œì‹œí•  ë‚´ìš©
    const iwRemoveable = true;

    // ì¸í¬ìœˆë„ìš°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
    const infowindow = new kakao.maps.InfoWindow({
      content: iwContent,
      removable: iwRemoveable,
    });

    // ì¸í¬ìœˆë„ìš°ë¥¼ ë§ˆì»¤ìœ„ì— í‘œì‹œí•©ë‹ˆë‹¤
    infowindow.open(map, marker);

    // ì§€ë„ ì¤‘ì‹¬ì¢Œí‘œë¥¼ ì ‘ì†ìœ„ì¹˜ë¡œ ë³€ê²½í•©ë‹ˆë‹¤
    map.setCenter(locPosition);
  }
};

// ë°›ì€ ë°ì´í„° ê°€ê³µ ë°‘ state set
const dataHandler = (items) => {
  const arr = items.map((item) => {
    const name = item.centerName;
    const sp = name.split("ì½”ë¡œë‚˜19")[1];
    const center = {
      id: item.id,
      centerName: sp,
      orgName: item.org,
      centerType: item.centerType,
      facilityName: item.facilityName,
      address: item.address,
      sido: item.sido,
      sigungu: item.sigungu,
      zipCode: item.zipCode,
      url: `https://map.kakao.com/link/map/${item.org || sp},${item.lng},${
        item.lat
      }`,
      latlng: new kakao.maps.LatLng(item.lng, item.lat),
      info: `<div style="width:200px; padding:5px; font-size:12px;">${
        item.org || sp
      } <br><a href="https://map.kakao.com/link/map/${item.org || sp},${
        item.lng
      },${
        item.lat
      }" style="color:blue" target="_blank">í°ì§€ë„ë³´ê¸°</a> <a href="https://map.kakao.com/link/to/${
        item.org || sp
      },${item.lng},${
        item.lat
      }" style="color:blue" target="_blank">ê¸¸ì°¾ê¸°</a></div>`,
    };
    return center;
  });
  setCenters(arr);
  kakaoMaps(arr);
};

//APIì—ì„œ ë°›ì€ ë°ì´í„° Handlerì— ì¸ìê°’ìœ¼ë¡œ
axios
  .get("https://projectgoc.herokuapp.com/api/center")
  .then((res) => {
    const items = res.data.data;
    setIsLoading(false);
    dataHandler(items);
  })
  .catch((err) => {
    setStatus(false);
    console.log(err);
  });
```
